#!/usr/bin/env python
# coding: utf-8

from __future__ import unicode_literals, absolute_import, print_function

import thebot
import sys
import server_reloader

from time import sleep
from contextlib import closing

def run_bot(*args):
    with closing(thebot.Bot(args)) as bot:
        try:
            while not bot.exiting:
                sleep(1)
        except KeyboardInterrupt:
            pass

def main():
    server_reloader.main(
        run_bot,
        tuple(sys.argv[1:]),
        {},
        lambda: print('Reloading codeâ€¦')
    )


if __name__ == '__main__':
    main()

